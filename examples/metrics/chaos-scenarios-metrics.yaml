# Metrics common to chaos_tests.yaml, node_scenarios.yaml, and pod_disruption_scenarios.yaml
# (extracted from docs/metric-config-by-file.md â€” only metrics that appear in all three files)
#
# Example files where these metrics appear:
#   chaos_tests.yaml
#   node_scenarios.yaml
#   pod_disruption_scenarios.yaml
#
- name: health_check_recovery
  metricName.keyword: health_check_recovery
  metric_of_interest: duration
  not:
    status_code: 200
  agg:
    value: duration
    agg_type: sum

# ETCD Performance metrics
- name: etcd_99th_backend_commit_duration
  threshold: 15
  direction: 1
  metricName.keyword: 99thEtcdDiskBackendCommit
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg

- name: etcd_99th_wal_fsync_duration
  threshold: 15
  direction: 1
  metricName.keyword: 99thEtcdDiskWalFsync
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg

- name: etcd_99th_round_trip_time
  threshold: 15
  direction: 1
  metricName.keyword: 99thEtcdRoundTripTime
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg

# API Server metrics
- name: api_inflight_requests
  threshold: 15
  direction: 1
  metricName.keyword: APIInflightRequests
  metric_of_interest: value
  agg:
    value: value
    agg_type: max

# CPU Usage metrics
- name: cpu_cluster_usage_ratio
  threshold: 15
  direction: 1
  metricName.keyword: cpu-cluster-usage-ratio
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_crio
  threshold: 15
  direction: 1
  metricName.keyword: cpu-crio
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_etcd
  threshold: 15
  direction: 1
  metricName.keyword: cpu-etcd
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_infra
  threshold: 15
  direction: 1
  metricName.keyword: cpu-infra
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_kube_apiserver
  threshold: 15
  direction: 1
  metricName.keyword: cpu-kube-apiserver
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_kube_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: cpu-kube-controller-manager
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_kubelet
  threshold: 15
  direction: 1
  metricName.keyword: cpu-kubelet
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_masters
  threshold: 15
  direction: 1
  metricName.keyword: cpu-masters
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_multus
  threshold: 15
  direction: 1
  metricName.keyword: cpu-multus
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_openshift_apiserver
  threshold: 15
  direction: 1
  metricName.keyword: cpu-openshift-apiserver
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_openshift_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: cpu-openshift-controller-manager
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_ovn_control_plane
  threshold: 15
  direction: 1
  metricName.keyword: cpu-ovn-control-plane
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_ovnkube_node
  threshold: 15
  direction: 1
  metricName.keyword: cpu-ovnkube-node
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_prometheus
  threshold: 15
  direction: 1
  metricName.keyword: cpu-prometheus
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_router
  threshold: 15
  direction: 1
  metricName.keyword: cpu-router
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

- name: cpu_workers
  threshold: 15
  direction: 1
  metricName.keyword: cpu-workers
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: avg

# Max CPU metrics
- name: max_cpu_crio
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-crio
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

- name: max_cpu_infra
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-infra
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

- name: max_cpu_kube_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-kube-controller-manager
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

- name: max_cpu_kubelet
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-kubelet
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

- name: max_cpu_prometheus
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-prometheus
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

- name: max_cpu_workers
  threshold: 15
  direction: 1
  metricName.keyword: max-cpu-workers
  metric_of_interest: value
  agg:
    value: cpu
    agg_type: max

# Memory Usage metrics
- name: memory_cluster_usage_ratio
  threshold: 15
  direction: 1
  metricName.keyword: memory-cluster-usage-ratio
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_crio
  threshold: 15
  direction: 1
  metricName.keyword: memory-crio
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_etcd
  threshold: 15
  direction: 1
  metricName.keyword: memory-etcd
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_infra
  threshold: 15
  direction: 1
  metricName.keyword: memory-infra
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_kube_apiserver
  threshold: 15
  direction: 1
  metricName.keyword: memory-kube-apiserver
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_kube_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: memory-kube-controller-manager
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_kubelet
  threshold: 15
  direction: 1
  metricName.keyword: memory-kubelet
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_masters
  threshold: 15
  direction: 1
  metricName.keyword: memory-masters
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_multus
  threshold: 15
  direction: 1
  metricName.keyword: memory-multus
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_openshift_apiserver
  threshold: 15
  direction: 1
  metricName.keyword: memory-openshift-apiserver
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_openshift_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: memory-openshift-controller-manager
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_ovn_control_plane
  threshold: 15
  direction: 1
  metricName.keyword: memory-ovn-control-plane
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_ovnkube_node
  threshold: 15
  direction: 1
  metricName.keyword: memory-ovnkube-node
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_prometheus
  threshold: 15
  direction: 1
  metricName.keyword: memory-prometheus
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_router
  threshold: 15
  direction: 1
  metricName.keyword: memory-router
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_sum_workers
  threshold: 15
  direction: 1
  metricName.keyword: memory-sum-workers
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

- name: memory_workers
  threshold: 15
  direction: 1
  metricName.keyword: memory-workers
  metric_of_interest: value
  agg:
    value: mem
    agg_type: avg

# Max Memory metrics
- name: max_memory_crio
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-crio
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_infra
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-infra
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_kube_controller_manager
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-kube-controller-manager
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_kubelet
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-kubelet
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_masters
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-masters
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_prometheus
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-prometheus
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_sum_infra
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-sum-infra
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_sum_kubelet
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-sum-kubelet
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

- name: max_memory_workers
  threshold: 15
  direction: 1
  metricName.keyword: max-memory-workers
  metric_of_interest: value
  agg:
    value: mem
    agg_type: max

# Node CPU Seconds metrics
- name: node_cpu_seconds_infra
  threshold: 15
  direction: 1
  metricName.keyword: nodeCPUSeconds-Infra
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg

- name: node_cpu_seconds_masters
  threshold: 15
  direction: 1
  metricName.keyword: nodeCPUSeconds-Masters
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg

- name: node_cpu_seconds_workers
  threshold: 15
  direction: 1
  metricName.keyword: nodeCPUSeconds-Workers
  metric_of_interest: value
  agg:
    value: value
    agg_type: avg
